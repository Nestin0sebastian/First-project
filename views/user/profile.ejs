<%- include('../partials/userheader.ejs')%>
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10">

            <div class="header-middle sticky-header">
                <div class="container">
                    <div class="header-left">
                        <button class="mobile-menu-toggler">
                            <span class="sr-only">Toggle mobile menu</span>
                            <i class="icon-bars"></i>
                        </button>

                        <a href="index.html" class="logo">
                        </a>

                        <nav class="main-nav">
                            <ul class="menu sf-arrows">
                                <li class="megamenu-container active">
                                    <!-- <a href="index.html" class="sf-with-ul">Home</a> -->

                                    <div class="megamenu demo">
                                        <div class="menu-col">
                                            <div class="menu-title">Choose your demo</div><!-- End .menu-title -->

                                            <div class="demo-list">
                                                <div class="demo-item">
                                                    <a href="index-1.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/1.jpg);"></span>
                                                        <span class="demo-title">01 - furniture store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item">
                                                    <a href="index-2.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/2.jpg);"></span>
                                                        <span class="demo-title">02 - furniture store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item">
                                                    <a href="index-3.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/3.jpg);"></span>
                                                        <span class="demo-title">03 - electronic store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item">
                                                    <a href="index-4.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/4.jpg);"></span>
                                                        <span class="demo-title">04 - electronic store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item">
                                                    <a href="index-5.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/5.jpg);"></span>
                                                        <span class="demo-title">05 - fashion store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item">
                                                    <a href="index-6.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/6.jpg);"></span>
                                                        <span class="demo-title">06 - fashion store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item">
                                                    <a href="index-7.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/7.jpg);"></span>
                                                        <span class="demo-title">07 - fashion store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item">
                                                    <a href="index-8.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/8.jpg);"></span>
                                                        <span class="demo-title">08 - fashion store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item">
                                                    <a href="index-9.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/9.jpg);"></span>
                                                        <span class="demo-title">09 - fashion store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item">
                                                    <a href="index-10.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/10.jpg);"></span>
                                                        <span class="demo-title">10 - shoes store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-11.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/11.jpg);"></span>
                                                        <span class="demo-title">11 - furniture simple store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-12.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/12.jpg);"></span>
                                                        <span class="demo-title">12 - fashion simple store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-13.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/13.jpg);"></span>
                                                        <span class="demo-title">13 - market</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-14.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/14.jpg);"></span>
                                                        <span class="demo-title">14 - market fullwidth</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-15.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/15.jpg);"></span>
                                                        <span class="demo-title">15 - lookbook 1</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-16.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/16.jpg);"></span>
                                                        <span class="demo-title">16 - lookbook 2</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-17.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/17.jpg);"></span>
                                                        <span class="demo-title">17 - fashion store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-18.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/18.jpg);"></span>
                                                        <span class="demo-title">18 - fashion store (with sidebar)</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-19.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/19.jpg);"></span>
                                                        <span class="demo-title">19 - games store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-20.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/20.jpg);"></span>
                                                        <span class="demo-title">20 - book store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-21.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/21.jpg);"></span>
                                                        <span class="demo-title">21 - sport store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-22.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/22.jpg);"></span>
                                                        <span class="demo-title">22 - tools store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-23.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/23.jpg);"></span>
                                                        <span class="demo-title">23 - fashion left navigation store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                                <div class="demo-item hidden">
                                                    <a href="index-24.html">
                                                        <span class="demo-bg" style="background-image: url(assets/images/menu/demos/24.jpg);"></span>
                                                        <span class="demo-title">24 - extreme sport store</span>
                                                    </a>
                                                </div><!-- End .demo-item -->

                                            </div><!-- End .demo-list -->

                                            <div class="megamenu-action text-center">
                                                <a href="#" class="btn btn-outline-primary-2 view-all-demos"><span>View All Demos</span><i class="icon-long-arrow-right"></i></a>
                                            </div><!-- End .text-center -->
                                        </div><!-- End .menu-col -->
                                    </div><!-- End .megamenu -->
                                </li>
                                <li>
                                    <!-- <a href="category.html" class="sf-with-ul">Shop</a> -->

                                    <div class="megamenu megamenu-md">
                                        <div class="row no-gutters">
                                            <div class="col-md-8">
                                                <div class="menu-col">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="menu-title">Shop with sidebar</div><!-- End .menu-title -->
                                                            <ul>
                                                                <li><a href="category-list.html">Shop List</a></li>
                                                                <li><a href="category-2cols.html">Shop Grid 2 Columns</a></li>
                                                                <li><a href="category.html">Shop Grid 3 Columns</a></li>
                                                                <li><a href="category-4cols.html">Shop Grid 4 Columns</a></li>
                                                                <li><a href="category-market.html"><span>Shop Market<span class="tip tip-new">New</span></span></a></li>
                                                            </ul>

                                                            <div class="menu-title">Shop no sidebar</div><!-- End .menu-title -->
                                                            <ul>
                                                                <li><a href="category-boxed.html"><span>Shop Boxed No Sidebar<span class="tip tip-hot">Hot</span></span></a></li>
                                                                <li><a href="category-fullwidth.html">Shop Fullwidth No Sidebar</a></li>
                                                            </ul>
                                                        </div><!-- End .col-md-6 -->

                                                        <div class="col-md-6">
                                                            <div class="menu-title">Product Category</div><!-- End .menu-title -->
                                                            <ul>
                                                                <li><a href="product-category-boxed.html">Product Category Boxed</a></li>
                                                                <li><a href="product-category-fullwidth.html"><span>Product Category Fullwidth<span class="tip tip-new">New</span></span></a></li>
                                                            </ul>
                                                            <div class="menu-title">Shop Pages</div><!-- End .menu-title -->
                                                            <ul>
                                                                <li><a href="cart.html">Cart</a></li>
                                                                <li><a href="checkout.html">Checkout</a></li>
                                                                <li><a href="wishlist.html">Wishlist</a></li>
                                                                <li><a href="dashboard.html">My Account</a></li>
                                                                <li><a href="#">Lookbook</a></li>
                                                            </ul>
                                                        </div><!-- End .col-md-6 -->
                                                    </div><!-- End .row -->
                                                </div><!-- End .menu-col -->
                                            </div><!-- End .col-md-8 -->

                                            <div class="col-md-4">
                                                <div class="banner banner-overlay">
                                                    <a href="category.html" class="banner banner-menu">
                                                        <img src="assets/images/menu/banner-1.jpg" alt="Banner">

                                                        <div class="banner-content banner-content-top">
                                                            <div class="banner-title text-white">Last <br>Chance<br><span><strong>Sale</strong></span></div><!-- End .banner-title -->
                                                        </div><!-- End .banner-content -->
                                        Add Ad            </a>
                                                </div><!-- End .banner banner-overlay -->
                                            </div><!-- End .col-md-4 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .megamenu megamenu-md -->
                                </li>
                                <li>
                                    <!-- <a href="product.html" class="sf-with-ul">Product</a> -->

                                    <div class="megamenu megamenu-sm">
                                        <div class="row no-gutters">
                                            <div class="col-md-6">
                                                <div class="menu-col">
                                                    <div class="menu-title">Product Details</div><!-- End .menu-title -->
                                                    <ul>
                                                        <li><a href="product.html">Default</a></li>
                                                        <li><a href="product-centered.html">Centered</a></li>
                                                        <li><a href="product-extended.html"><span>Extended Info<span class="tip tip-new">New</span></span></a></li>
                                                        <li><a href="product-gallery.html">Gallery</a></li>
                                                        <li><a href="product-sticky.html">Sticky Info</a></li>
                                                        <li><a href="product-sidebar.html">Boxed With Sidebar</a></li>
                                                        <li><a href="product-fullwidth.html">Full Width</a></li>
                                                        <li><a href="product-masonry.html">Masonry Sticky Info</a></li>
                                                    </ul>
                                                </div><!-- End .menu-col -->
                                            </div><!-- End .col-md-6 -->

                                            <div class="col-md-6">
                                                <div class="banner banner-overlay">
                                                    <a href="category.html">
                                                        <img src="assets/images/menu/banner-2.jpg" alt="Banner">

                                                        <div class="banner-content banner-content-bottom">
                                                            <div class="banner-title text-white">New Trends<br><span><strong>spring 2019</strong></span></div><!-- End .banner-title -->
                                                        </div><!-- End .banner-content -->
                                                    </a>
                                                </div><!-- End .banner -->
                                            </div><!-- End .col-md-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .megamenu megamenu-sm -->
                                </li>
                                <li>
                                    <!-- <a href="#" class="sf-with-ul">Pages</a> -->

                                    <ul>
                                        <li>
                                            <!-- <a href="about.html" class="sf-with-ul">About</a> -->

                                            <ul>
                                                <li><a href="about.html">About 01</a></li>
                                                <li><a href="about-2.html">About 02</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="contact.html" class="sf-with-ul">Contact</a>

                                            <ul>
                                                <li><a href="contact.html">Contact 01</a></li>
                                                <li><a href="contact-2.html">Contact 02</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="login.html">Login</a></li>
                                        <li><a href="faq.html">FAQs</a></li>
                                        <li><a href="404.html">Error 404</a></li>
                                        <li><a href="coming-soon.html">Coming Soon</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <!-- <a href="blog.html" class="sf-with-ul">Blog</a> -->

                                    <ul>
                                        <li><a href="blog.html">Classic</a></li>
                                        <li><a href="blog-listing.html">Listing</a></li>
                                        <li>
                                            <a href="#">Grid</a>
                                            <ul>
                                                <li><a href="blog-grid-2cols.html">Grid 2 columns</a></li>
                                                <li><a href="blog-grid-3cols.html">Grid 3 columns</a></li>
                                                <li><a href="blog-grid-4cols.html">Grid 4 columns</a></li>
                                                <li><a href="blog-grid-sidebar.html">Grid sidebar</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="#">Masonry</a>
                                            <ul>
                                                <li><a href="blog-masonry-2cols.html">Masonry 2 columns</a></li>
                                                <li><a href="blog-masonry-3cols.html">Masonry 3 columns</a></li>
                                                <li><a href="blog-masonry-4cols.html">Masonry 4 columns</a></li>
                                                <li><a href="blog-masonry-sidebar.html">Masonry sidebar</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="#">Mask</a>
                                            <ul>
                                                <li><a href="blog-mask-grid.html">Blog mask grid</a></li>
                                                <li><a href="blog-mask-masonry.html">Blog mask masonry</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="#">Single Post</a>
                                            <ul>
                                                <li><a href="single.html">Default with sidebar</a></li>
                                                <li><a href="single-fullwidth.html">Fullwidth no sidebar</a></li>
                                                <li><a href="single-fullwidth-sidebar.html">Fullwidth with sidebar</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <!-- <a href="elements-list.html" class="sf-with-ul">Elements</a> -->

                                    <ul>
                                        <li><a href="elements-products.html">Products</a></li>
                                        <li><a href="elements-typography.html">Typography</a></li>
                                        <li><a href="elements-titles.html">Titles</a></li>
                                        <li><a href="elements-banners.html">Banners</a></li>
                                        <li><a href="elements-product-category.html">Product Category</a></li>
                                        <li><a href="elements-video-banners.html">Video Banners</a></li>
                                        <li><a href="elements-buttons.html">Buttons</a></li>
                                        <li><a href="elements-accordions.html">Accordions</a></li>
                                        <li><a href="elements-tabs.html">Tabs</a></li>
                                        <li><a href="elements-testimonials.html">Testimonials</a></li>
                                        <li><a href="elements-blog-posts.html">Blog Posts</a></li>
                                        <li><a href="elements-portfolio.html">Portfolio</a></li>
                                        <li><a href="elements-cta.html">Call to Action</a></li>
                                        <li><a href="elements-icon-boxes.html">Icon Boxes</a></li>
                                    </ul>
                                </li>
                            </ul><!-- End .menu -->
                        </nav><!-- End .main-nav -->
                    </div><!-- End .header-left -->

                    <div class="header-right">
                        <div class="header-search">
                            <!-- <a href="#" class="search-toggle" role="button" title="Search"><i class="icon-search"></i></a> -->
                            <form action="#" method="get">
                                <div class="header-search-wrapper">
                                    <label for="q" class="sr-only">Search</label>
                                    <input type="search" class="form-control" name="q" id="q" placeholder="Search in..." required>
                                </div><!-- End .header-search-wrapper -->
                            </form>
                        </div><!-- End .header-search -->
                        <div class="dropdown compare-dropdown">
                            <!-- <a href="#" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-display="static" title="Compare Products" aria-label="Compare Products"> -->
                                <i class="icon-random"></i>
                            </a>

                           <!-- End .dropdown-menu -->
                        </div><!-- End .compare-dropdown -->

                        <div class="dropdown cart-dropdown">
                            <!-- <a href="#" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-display="static"> -->
                                <!-- <i class="icon-shopping-cart"></i> -->
                                <!-- <span class="cart-count">2</span> -->
                            </a>

                            <!-- End .dropdown-menu -->
                        </div><!-- End .cart-dropdown -->
                    </div><!-- End .header-right -->
                </div><!-- End .container -->
            </div><!-- End .header-middle -->
        </header><!-- End .header -->

        <main class="main">
        	<div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
        		<div class="container">
        			<h1 class="page-title">My Account<span></span></h1>
        		</div><!-- End .container -->
        	</div><!-- End .page-header -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav mb-3">
                <div class="container">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                        <li class="breadcrumb-item"><a href="#">Shop</a></li>
                        <li class="breadcrumb-item active" aria-current="page">My Account</li>
                    </ol>
                </div><!-- End .container -->
            </nav><!-- End .breadcrumb-nav -->

            <div class="page-content">
            	<div class="dashboard">
	                <div class="container">
	                	<div class="row">
                            <aside class="col-md-4 col-lg-3">
                                <!-- Tab navigation -->
                                <ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" id="tab-dashboard-link" data-toggle="tab" href="#tab-dashboard" role="tab" aria-controls="tab-dashboard" aria-selected="true">Dashboard</a>
                                    </li>
                                    <!-- Add other list items for each tab link -->
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-orders-link" data-toggle="tab" href="#tab-orders" role="tab" aria-controls="tab-orders" aria-selected="false">Orders</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-wallet-link" data-toggle="tab" href="#tab-wallet" role="tab" aria-controls="tab-wallet" aria-selected="false">Payment History</a>

                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-downloads-link" data-toggle="tab" href="#tab-downloads" role="tab" aria-controls="tab-downloads" aria-selected="false">Edit Account</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-address-link" data-toggle="tab" href="#tab-address" role="tab" aria-controls="tab-address" aria-selected="false"> My Addresses</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-add-address-link" data-toggle="tab" href="#tab-addaddress" role="tab" aria-controls="tab-addaddress" aria-selected="false">Add Address</a>
                                    </li>
                                    <li class="nav-item">
                                        <a id="signOutLink" class="nav-link" href="#">Sign Out</a>
                                    </li>
                                    <li class="nav-item">
                                        <a id="signOutLink" class="nav-link" href="/changepassword">Change password</a>
                                    </li>
                                    
                                    
                                </ul>
                            </aside><!-- End .col-lg-3 -->

	                		<div class="col-md-8 col-lg-9">
	                			<div class="tab-content">
                                    <div class="tab-pane fade show active" id="tab-dashboard" role="tabpanel" aria-labelledby="tab-dashboard-link">
                                        <p>Welcome <span class="font-weight-normal text-dark"> <%= userdata.firstname %>,</span><span class="font-weight-normal text-dark"> </span><span class="font-weight-normal text-dark"></span> <a href="#"></a></p>
								    	<br> Your journey starts here. Explore, customize, and make this space your own. Need help? Don't hesitate to reach out - we're here to assist you every step of the way.Here you can check the <a href="#tab-orders" class="tab-trigger-link ">recent orders</a>, manage your <a href="#tab-address" class="tab-trigger-link">shipping and billing addresses</a>, and <a href="#tab-account" class="tab-trigger-link">edit your password and account details</a>.</p>
                                        

                                        <div class="wallet-container">
                                            <div class="wallet-icon" onclick="openWalletModal()">
                                                <i class="fas fa-wallet"></i> Available Wallet
                                            </div>
                                        </div>
                                        <% if (userdata.wallet > 0) { %>
                                            <div id="walletModal" class="modal">
                                                <div class="modal-content">
                                                    <span class="close" onclick="closeWalletModal()">&times;</span>
                                                    <p>Your Balance:</p>
                                                    <h4>₹<%= userdata.wallet %></h4>
                                                    <!-- Add more content or actions related to payment options here -->
                                                </div>
                                            </div>
                                        <% } else { %>
                                            <div id="walletModal" class="modal">
                                                <div class="modal-content">
                                                    <span class="close" onclick="closeWalletModal()">&times;</span>
                                                    <p>No Wallet Available !</p>
                                                    <!-- Add more content or actions related to payment options here -->
                                                </div>
                                            </div>
                                        <% } %>
                                        
                                        <button id="openModalBtn">Refferal Code</button>
                                        
                                        


                                        

                        <!-- Add the "Copy Code" button to trigger the referral code copying -->
                        <% if (userdata.refferalId != null && userdata.refferalId !== '') { %>
                            <div id="myModal" class="modal">
                                <div class="modal-content">
                                    <span class="close" onclick="closeModal()">&times;</span>
                                    <div>
                                        <p>🎁 Unlock exclusive rewards by sharing your unique referral code with friends! 🎉</p>
                                        <input type="text" id="referralCode" value="<%= userdata.refferalId %>" readonly>
                                        <button class="copy-btn" onclick="copyReferralCode()">Copy Code</button>
                                    </div>
                                </div>
                            </div>
                        <% } else { %>
                            <div id="myModal" class="modal">
                                <div class="modal-content">
                                    <span class="close" onclick="closeModal()">&times;</span>
                                    <div>
                                        <p>You signed up without a referral code!</p>
                                        <!-- Note: It seems like you're showing the referral code even if it's 0; adjust as needed -->
                                    </div>
                                </div>
                            </div>
                        <% } %>
                        
<script>
    // Your existing modal script
    document.getElementById('openModalBtn').addEventListener('click', openModal);

    function openModal() {
        document.getElementById('myModal').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('myModal').style.display = 'none';
    }

    // Function to copy the referral code to the clipboard
    function copyReferralCode() {
        var codeInput = document.getElementById("referralCode");
        codeInput.select();
        codeInput.setSelectionRange(0, 99999); /*For mobile devices*/
        document.execCommand("copy");
        // alert("Referral code copied: " + codeInput.value);
    }



    function openWalletModal() {
    document.getElementById('walletModal').style.display = 'block';
}

function closeWalletModal() {
    document.getElementById('walletModal').style.display = 'none';
}

</script>


<script src="script.js"></script>
								    </div><!-- .End .tab-pane -->
                                

<!-- ... (other code) ... -->
<!-- ... (other code) ... -->
<!-- ... (other code) ... -->
<!-- ... (other code) ... -->
<!-- ... (other code) ... -->
<div class="tab-pane fade" id="tab-orders" role="tabpanel" aria-labelledby="tab-orders-link">
    <div class="table-responsive table-product">
        <table class="table all-package theme-table" id="table_id">
            <thead>
                <tr>
                    <th>OrderId</th>
                    <th>Total</th>
                    <th>Date</th>
                    <th>Status</th>
                    <th>Details</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                

                <% orders.forEach((finder) => { 
                        finder.products.forEach((product) => { %>
                            <tr>
                                <td><%= finder.orderId %></td>
                                <td>₹<%= Math.round(finder.totalAmount) %></td>
                                <td><%= formatDate(finder.date) %></td>
                                <td><%= finder.orderStatus %></td>
                                <td>
                                    <% if (product.productId && product.productId._id) { %>
                                        <a href="/detailedorder/<%= finder.orderId %>?productid=<%= product.productId._id %>" class="btn btn-info btn-sm">View Details</a>
                                    <% } else { %>
                                        <span class="text-danger">Product details not available</span>
                                    <% } %>
                                </td>
                                <td>
                                    <% if (finder.orderStatus === 'Delivered') { %>
                                        <button class="delivered-button" style="font-size: 12px; font-weight: bold;" onclick="returnOrder('<%= finder._id %>','<%= product.productId._id %>')">Return</button>
                                        <% } else if (finder.orderStatus === 'returned') { %>
                                            <p class="badge rounded-pill" style="font-size: 15px; padding: 8px 12px; background-color: rgb(234, 175, 11); color: white;">Returned</p>
                                            <% } else if (finder.orderStatus === 'cancelled') { %>
                                        <p class="badge rounded-pill alert-danger" style="font-size: 15px; padding: 8px 12px;">Cancelled</p>

                                        <% }
                                    else if (finder.orderStatus === 'rejected') { %>
                                        <p class="badge rounded-pill" style="font-size: 15px; padding: 8px 12px; background-color: rgb(0, 0, 0); color: white;">Rejected</p>
                                        <% }else if (finder.orderStatus === 'requested') { %>
                                        <p class="badge rounded-pill" style="font-size: 15px; padding: 8px 12px; background-color: yellow;">Requested</p>
                                        <% }
                                    
                                    else { %>
                                        <% if (finder.orderStatus !== 'Delivered' && finder.orderStatus !== 'Cancelled' && product.productId && product.productId._id && finder.orderStatus !== 'cancelled') { %>
                                            <div class="btn-group">
                                                <button class="btn btn-danger custom-btn-sm cancel-btn dropdown-toggle" type="button" id="cancelDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                    Cancel
                                                </button>
                                                
                                                <div class="dropdown-menu dropdown-lg" aria-labelledby="cancelDropdown" style="min-width: 30rem;">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="cancelReason" id="productOutOfStock"  value="  Delivery tracking issues.">
                                                        <label class="form-check-label" for="productOutOfStock">
                                                            Delivery tracking issues.
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="cancelReason" id="changedMind" value="                                                            Found a better price elsewhere.
                                                        ">
                                                        <label class="form-check-label" for="changedMind">
                                                            Found a better price elsewhere.
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="cancelReason" id="orderNotDelivered" value="Order not delivered.">
                                                        <label class="form-check-label" for="orderNotDelivered">
                                                            Order not delivered.
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="cancelReason" id="multipleOrders" value=" Accidentally placed multiple orders for the same item.">
                                                        <label class="form-check-label" for="multipleOrders">
                                                            Accidentally placed multiple orders for the same item.
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="cancelReason" id="personalReasons" value=" Personal reasons.">
                                                        <label class="form-check-label" for="personalReasons">
                                                            Personal reasons.
                                                        </label>
                                                    </div>
                                                    <!-- Add more radio options as needed -->
                                                    <div class="dropdown-divider"></div>
                                                    <div class="text-center">
                                                        <button class="btn btn-primary" onclick="sendCancellationRequest('<%= finder._id %>', '<%= product.productId._id %>', getSelectedReason())">Send Request</button>

                                                        <script>
                                                            function getSelectedReason() {
                                                                // Get the selected reason from the radio options
                                                                const selectedReason = document.querySelector('input[name="cancelReason"]:checked');
                                                                return selectedReason ? selectedReason.value : null;
                                                            }
                                                        
                                                            function sendCancellationRequest(orderId, productId, reason) {
                                                           
                                                                // Check if a reason is selected
                                                                if (reason !== null) {
                                                                    // Perform the fetch request with orderId, productId, and reason
                                                                    fetch('/cancelorder', {
                                                                        method: 'POST',
                                                                        headers: {
                                                                            'Content-Type': 'application/json',
                                                                        },
                                                                        body: JSON.stringify({ orderId, productId, reason }),
                                                                    })
                                                                    .then(response => response.json())
                                                                    .then(data => {
                                                                        // Handle the response as needed
                                                                        console.log('Cancellation request sent:', data);
                                                                        // Reload the page after a short delay
                                                                        setTimeout(() => {
                                                                            location.reload();
                                                                        }, 500); // Adjust the delay time as needed
                                                                    })
                                                                    .catch(error => {
                                                                        console.error('Error sending cancellation request:', error);
                                                                    });
                                                                } else {
                                                                    // Handle the case where no reason is selected
                                                                    console.error('No cancellation reason selected.');
                                                                }
                                                            }
                                                        </script>
                                                        
                                                        
                                                        
                                                                                                            </div>
                                                </div>
                                                
                                                
                                            </div>
                                        <% } %>
                                    <% } %>
                                </td>
                            </tr>
                <% }); %>
                <% }); %>
            </tbody>
        </table>

        <!-- JavaScript to handle cancel order request -->
        

        <% function formatDate(date) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(date).toLocaleDateString(undefined, options);
        } %>
    </div>
</div>







<!-- Waalet -->

<div class="tab-pane fade" id="tab-wallet" role="tabpanel" aria-labelledby="tab-wallet-link">
    <div class="table-responsive table-product">
        <table class="table all-package theme-table" id="table_id">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>OrderId</th>
                    <th>Payment Method</th>
                    <th>Amount paid</th>
                   <th></th>
                    
                   
                </tr>
            </thead>
            <tbody>
                <% 
                    // Reverse the order of rendering, so the latest orders appear first
                    orders.forEach((finder) => { 
                        finder.products.forEach((product) => { 
                          
                %>
                                <tr>
                                    <td><%= formatDate(finder.date) %></td>
                                    <td><%= finder.orderId %></td>
                                    <td style="color: #000000; font-weight: bold; font-size: 16px;"><%= finder.paymentMethod %></td>
                                    <td style="color: #d39c12; font-weight: bold; font-size: 16px;">
                                        <h6 style="display: inline-block; margin: 0; padding: 0; margin-right: 5px;">₹</h6>
                                        <%= Math.round(finder.totalAmount) %>
                                    </td>
                                                                        <td>
                                        <!-- Add content to this cell if needed -->
                                    </td>
                                </tr>
                <% 
                            
                        }); 
                    }); 
                %>
            </tbody>
            
            
        </table>
    
        <% function formatDate(date) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(date).toLocaleDateString(undefined, options);
        } %>
    </div>
    
</div>


<!-- ... (other code) ... -->


<!-- ... (other code) ... -->

                                    
                                 

								    <div class="tab-pane fade" id="tab-downloads" role="tabpanel" aria-labelledby="tab-downloads-link">
								    
                                          <form action="/accountpost/<%= data._id %>" method="post">
                                                  <div class="form-group">
                                                      <label for="firstname">firstname</label>
                                                      <input type="text" class="form-control" id="register-firstname" name="firstname"   value="<%= data.firstname%>" onkeyup="validateFirstname()">
                                                      <span id="fnerrormsg"  class="text-danger" class="error"></span>
                                                  </div><!-- End .form-group -->
                                          
                                                 <div class="form-group">
                                                      <label for="lastname">lastname</label>
                                                      <input type="text" class="form-control" id="register-lastname" name="lastname" value="<%= data.lastname%>" onkeyup=" validateLastname()">
                                                      <span id="lnerrormsg" class="text-danger" class="error"></span>
                                                  </div>
                                          
                                                  <div class="form-group">
                                                      <label for="contact">phone no</label>
                                                      <input type="tel" class="form-control" id="register-phone" name="contact"  value="<%= data.contact%>" onkeyup="validateContact()">
                                                      <span id="pherrormsg" class="text-danger" class="error"></span>
                                                  </div>
                                                  <div class="form-group">
                                                      <label for="email">email</label>
                                                      <input type="email" class="form-control" id="register-email" name="email"   value="<%= data.email%>" onkeyup="validateEmail()">
                                                      <span id="mailerrormsg" class="text-danger" class="error"></span>
                                                  </div>

                                          
                                                  <div class="form-footer">
                                                      
                                          
                                                      <!-- <div class="custom-control custom-checkbox"> -->
                                                          <!-- <input type="checkbox" class="custom-control-input" id="register-policy" required> -->
                                                          <!-- <label class="custom-control-label" for="register-policy">I agree to the <a href="#">privacy policy</a> *</label> -->
                                                      <!-- </div>End .custom-checkbox -->
                                                  <!-- </div> -->
                                                      <div class="form-group">
                                                          <button type="submit" class="btn btn-outline-primary-2" onclick="return validateForm()">
                                                            <span id="buttonerrormsg"  text-danger class="error">Edit Account</span>
                                                              <i class="icon-long-arrow-right"></i>
                                                          </button>
                                                          </div>
                                                          </div>
                                                 <!-- End .form-footer -->
                                              </form>
                              
								    </div><!-- .End .tab-pane -->
                                    <div class="tab-pane fade" id="tab-address" role="tabpanel" aria-labelledby="tab-address-link">
                                        <% if (address !== null && address !== undefined && address.addresses.length > 0) { %>
                                          <div class="row">
                                            <% address.addresses.forEach((details) => { %>
                                              <div class="col-lg-6">
                                                <div class="card card-dashboard" style="height: 100%; border: 2px solid orange; border-radius: 8px;">
                                                  <div class="card-body">
                                                    <h5 class="card-title"><%= details.fullname %></h5>
                                                    <ul class="list-unstyled">
                                                      <li><strong>Contact:</strong> <%= details.contact %></li>
                                                      <li><strong>Pincode:</strong> <%= details.pincode %></li>
                                                      <li><strong>State:</strong> <%= details.state %></li>
                                                      <li><strong>Address:</strong> <%= details.address %></li>
                                                      <li><strong>Locality:</strong> <%= details.locality %></li>
                                                      <li><strong>City:</strong> <%= details.city %></li>
                                                      <!-- Other content -->
                                                    </ul>
                                                    <a href="/editaddress/<%= details._id %>">
                                                      <span class="edit-symbol btn"><i class="fas fa-pencil-alt"></i> Edit Address</span>
                                                    </a>
                                                    <div class="dustbin-icon">
                                                      <a href="/deleteaddress/<%= details._id %>" class="delete-address">
                                                        <i class="fas fa-trash-alt"></i>
                                                      </a>
                                                    </div>
                                                  </div><!-- End .card-body -->
                                                </div><!-- End .card-dashboard -->
                                              </div><!-- End .col-lg-6 -->
                                            <% }); %>
                                          </div><!-- End .row -->
                                        <% } else { %>
                                          <p>YOU DON'T HAVE AN ADDRESS!</p>
                                        <% } %>
                                      </div><!-- End .row -->

                                    

                                        <div class="tab-pane fade" id="tab-addaddress" role="tabpanel" aria-labelledby="tab-add-address-link">
                                            <form id="registrationForm" action="/addresspost" method="post">

                                                <div class="form-group">
                                                    <label for="register-fullname">Full Name:</label>
                                                    <input type="text" class="form-control" id="register-fullname" name="fullname" onkeyup="validateField('fullname')">
                                                    <span id="fullnameErrorMsg" class="text-danger error"></span>
                                                </div>
                    
                                                <div class="form-group">
                                                    <label for="register-phone">Phone Number:</label>
                                                    <input type="text" class="form-control" id="register-phone" name="contact" onkeyup="validateField('phone')">
                                                    <span id="phoneErrorMsg" class="text-danger error"></span>
                                                    <div class="form-group">
                                                        <label for="register-pincode">Pincode:</label>
                                                        <input type="tel" class="form-control" id="register-pincode" name="pincode" onkeyup="validatePincode()">
                                                        <span id="pincodeErrorMsg" class="text-danger error"></span>
                                                    </div>
                                                    
                                                    <div class="form-group">
                                                        <label for="register-state">State:</label>
                                                        <input type="text" class="form-control" id="register-state" name="state" onkeyup="validateState()">
                                                        <span id="stateErrorMsg" class="text-danger error"></span>
                                                    </div>
                                                    
                                                    <div class="form-group">
                                                        <label for="register-address">Address (House Name, Street, Area):</label>
                                                        <input type="text" class="form-control" id="register-address" name="address" onkeyup="validateAddress()">
                                                        <span id="addressErrorMsg" class="text-danger error"></span>
                                                    </div>
                                                    
                                                    <div class="form-group">
                                                        <label for="register-locality">Locality:</label>
                                                        <input type="text" class="form-control" id="register-locality" name="locality" onkeyup="validateLocality()">
                                                        <span id="localityErrorMsg" class="text-danger error"></span>
                                                    </div>
                                                    
                                                    <div class="form-group">
                                                        <label for="register-city">City:</label>
                                                        <input type="text" class="form-control" id="register-city" name="city" onkeyup="validateCity()">
                                                        <span id="cityErrorMsg" class="text-danger error"></span>
                                                    </div>
                                                    
                                                    <!-- Add a submit button here -->
                                                    <button type="submit" class="btn btn-primary">Submit</button>
                                                    </form>
                                                    

                                               
                                                <div class="form-footer">
                                                    
                                        
                                                            <!-- <div class="custom-control custom-checkbox"> -->
                                                        <!-- <input type="checkbox" class="custom-control-input" id="register-policy" required> -->
                                                        <!-- <label class="custom-control-label" for="register-policy">I agree to the <a href="#">privacy policy</a> *</label> -->
                                                    <!-- </div>End .custom-checkbox -->
                                                <!-- </div> -->
                                                    <div class="form-group">
                                                        
                                                        </div>
                                                        </div>
                                               <!-- End .form-footer -->
                                            </form>
                                         </div>

								 </div><!-- .End .tab-pane -->

	                		</div><!-- End .col-lg-9 -->



	                	</div><!-- End .row -->
	                </div><!-- End .container -->
                </div><!-- End .dashboard -->
            </div><!-- End .page-content -->
        </main><!-- End .main -->

        <footer class="footer">
        	<div class="footer-middle">
	            <div class="container">
	            	<div class="row">
	            		<div class="col-sm-6 col-lg-3">
	            			<div class="widget widget-about">
	            				<img src="assets/images/logo.png" class="footer-logo" alt="Footer Logo" width="105" height="25">
	            				<p>Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. </p>

	            				<div class="social-icons">
	            					<a href="#" class="social-icon" target="_blank" title="Facebook"><i class="icon-facebook-f"></i></a>
	            					<a href="#" class="social-icon" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
	            					<a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
	            					<a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
	            					<a href="#" class="social-icon" target="_blank" title="Pinterest"><i class="icon-pinterest"></i></a>
	            				</div><!-- End .soial-icons -->
	            			</div><!-- End .widget about-widget -->
	            		</div><!-- End .col-sm-6 col-lg-3 -->

	            		<div class="col-sm-6 col-lg-3">
	            			<div class="widget">
	            				<h4 class="widget-title">Useful Links</h4><!-- End .widget-title -->

	            				<ul class="widget-list">
	            					<li><a href="about.html">About Molla</a></li>
	            					<li><a href="#">How to shop on Molla</a></li>
	            					<li><a href="#">FAQ</a></li>
	            					<li><a href="contact.html">Contact us</a></li>
	            					<li><a href="login.html">Log in</a></li>
	            				</ul><!-- End .widget-list -->
	            			</div><!-- End .widget -->
	            		</div><!-- End .col-sm-6 col-lg-3 -->

	            		<div class="col-sm-6 col-lg-3">
	            			<div class="widget">
	            				<h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

	            				<ul class="widget-list">
	            					<li><a href="#">Payment Methods</a></li>
	            					<li><a href="#">Money-back guarantee!</a></li>
	            					<li><a href="#">Returns</a></li>
	            					<li><a href="#">Shipping</a></li>
	            					<li><a href="#">Terms and conditions</a></li>
	            					<li><a href="#">Privacy Policy</a></li>
	            				</ul><!-- End .widget-list -->
	            			</div><!-- End .widget -->
	            		</div><!-- End .col-sm-6 col-lg-3 -->

	            		<div class="col-sm-6 col-lg-3">
	            			<div class="widget">
	            				<h4 class="widget-title">My Account</h4><!-- End .widget-title -->

	            				<ul class="widget-list">
	            					<li><a href="#">Sign In</a></li>
	            					<li><a href="cart.html">View Cart</a></li>
	            					<li><a href="#">My Wishlist</a></li>
	            					<li><a href="#">Track My Order</a></li>
	            					<li><a href="#">Help</a></li>
	            				</ul><!-- End .widget-list -->
	            			</div><!-- End .widget -->
	            		</div><!-- End .col-sm-6 col-lg-3 -->
	            	</div><!-- End .row -->
	            </div><!-- End .container -->
	        </div><!-- End .footer-middle -->

	        <div class="footer-bottom">
	        	<div class="container">
	        		<p class="footer-copyright">Copyright © 2019 Molla Store. All Rights Reserved.</p><!-- End .footer-copyright -->
	        		<figure class="footer-payments">
	        			<img src="assets/images/payments.png" alt="Payment methods" width="272" height="20">
	        		</figure><!-- End .footer-payments -->
	        	</div><!-- End .container -->
	        </div><!-- End .footer-bottom -->
        </footer><!-- End .footer -->
    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

    <!-- Mobile Menu -->
    <div class="mobile-menu-overlay"></div><!-- End .mobil-menu-overlay -->

    <div class="mobile-menu-container">
        <div class="mobile-menu-wrapper">
            <span class="mobile-menu-close"><i class="icon-close"></i></span>

            <form action="#" method="get" class="mobile-search">
                <label for="mobile-search" class="sr-only">Search</label>
                <input type="search" class="form-control" name="mobile-search" id="mobile-search" placeholder="Search in..." required>
                <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
            </form>
            
            <nav class="mobile-nav">
                <ul class="mobile-menu">
                    <li class="active">
                        <a href="index.html">Home</a>

                        <ul>
                            <li><a href="index-1.html">01 - furniture store</a></li>
                            <li><a href="index-2.html">02 - furniture store</a></li>
                            <li><a href="index-3.html">03 - electronic store</a></li>
                            <li><a href="index-4.html">04 - electronic store</a></li>
                            <li><a href="index-5.html">05 - fashion store</a></li>
                            <li><a href="index-6.html">06 - fashion store</a></li>
                            <li><a href="index-7.html">07 - fashion store</a></li>
                            <li><a href="index-8.html">08 - fashion store</a></li>
                            <li><a href="index-9.html">09 - fashion store</a></li>
                            <li><a href="index-10.html">10 - shoes store</a></li>
                            <li><a href="index-11.html">11 - furniture simple store</a></li>
                            <li><a href="index-12.html">12 - fashion simple store</a></li>
                            <li><a href="index-13.html">13 - market</a></li>
                            <li><a href="index-14.html">14 - market fullwidth</a></li>
                            <li><a href="index-15.html">15 - lookbook 1</a></li>
                            <li><a href="index-16.html">16 - lookbook 2</a></li>
                            <li><a href="index-17.html">17 - fashion store</a></li>
                            <li><a href="index-18.html">18 - fashion store (with sidebar)</a></li>
                            <li><a href="index-19.html">19 - games store</a></li>
                            <li><a href="index-20.html">20 - book store</a></li>
                            <li><a href="index-21.html">21 - sport store</a></li>
                            <li><a href="index-22.html">22 - tools store</a></li>
                            <li><a href="index-23.html">23 - fashion left navigation store</a></li>
                            <li><a href="index-24.html">24 - extreme sport store</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="category.html">Shop</a>
                        <ul>
                            <li><a href="category-list.html">Shop List</a></li>
                            <li><a href="category-2cols.html">Shop Grid 2 Columns</a></li>
                            <li><a href="category.html">Shop Grid 3 Columns</a></li>
                            <li><a href="category-4cols.html">Shop Grid 4 Columns</a></li>
                            <li><a href="category-boxed.html"><span>Shop Boxed No Sidebar<span class="tip tip-hot">Hot</span></span></a></li>
                            <li><a href="category-fullwidth.html">Shop Fullwidth No Sidebar</a></li>
                            <li><a href="product-category-boxed.html">Product Category Boxed</a></li>
                            <li><a href="product-category-fullwidth.html"><span>Product Category Fullwidth<span class="tip tip-new">New</span></span></a></li>
                            <li><a href="cart.html">Cart</a></li>
                            <li><a href="checkout.html">Checkout</a></li>
                            <li><a href="wishlist.html">Wishlist</a></li>
                            <li><a href="#">Lookbook</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="product.html" class="sf-with-ul">Product</a>
                        <ul>
                            <li><a href="product.html">Default</a></li>
                            <li><a href="product-centered.html">Centered</a></li>
                            <li><a href="product-extended.html"><span>Extended Info<span class="tip tip-new">New</span></span></a></li>
                            <li><a href="product-gallery.html">Gallery</a></li>
                            <li><a href="product-sticky.html">Sticky Info</a></li>
                            <li><a href="product-sidebar.html">Boxed With Sidebar</a></li>
                            <li><a href="product-fullwidth.html">Full Width</a></li>
                            <li><a href="product-masonry.html">Masonry Sticky Info</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">Pages</a>
                        <ul>
                            <li>
                                <a href="about.html">About</a>

                                <ul>
                                    <li><a href="about.html">About 01</a></li>
                                    <li><a href="about-2.html">About 02</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="contact.html">Contact</a>

                                <ul>
                                    <li><a href="contact.html">Contact 01</a></li>
                                    <li><a href="contact-2.html">Contact 02</a></li>
                                </ul>
                            </li>
                            <li><a href="login.html">Login</a></li>
                            <li><a href="faq.html">FAQs</a></li>
                            <li><a href="404.html">Error 404</a></li>
                            <li><a href="coming-soon.html">Coming Soon</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="blog.html">Blog</a>

                        <ul>
                            <li><a href="blog.html">Classic</a></li>
                            <li><a href="blog-listing.html">Listing</a></li>
                            <li>
                                <a href="#">Grid</a>
                                <ul>
                                    <li><a href="blog-grid-2cols.html">Grid 2 columns</a></li>
                                    <li><a href="blog-grid-3cols.html">Grid 3 columns</a></li>
                                    <li><a href="blog-grid-4cols.html">Grid 4 columns</a></li>
                                    <li><a href="blog-grid-sidebar.html">Grid sidebar</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Masonry</a>
                                <ul>
                                    <li><a href="blog-masonry-2cols.html">Masonry 2 columns</a></li>
                                    <li><a href="blog-masonry-3cols.html">Masonry 3 columns</a></li>
                                    <li><a href="blog-masonry-4cols.html">Masonry 4 columns</a></li>
                                    <li><a href="blog-masonry-sidebar.html">Masonry sidebar</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Mask</a>
                                <ul>
                                    <li><a href="blog-mask-grid.html">Blog mask grid</a></li>
                                    <li><a href="blog-mask-masonry.html">Blog mask masonry</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Single Post</a>
                                <ul>
                                    <li><a href="single.html">Default with sidebar</a></li>
                                    <li><a href="single-fullwidth.html">Fullwidth no sidebar</a></li>
                                    <li><a href="single-fullwidth-sidebar.html">Fullwidth with sidebar</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="elements-list.html">Elements</a>
                        <ul>
                            <li><a href="elements-products.html">Products</a></li>
                            <li><a href="elements-typography.html">Typography</a></li>
                            <li><a href="elements-titles.html">Titles</a></li>
                            <li><a href="elements-banners.html">Banners</a></li>
                            <li><a href="elements-product-category.html">Product Category</a></li>
                            <li><a href="elements-video-banners.html">Video Banners</a></li>
                            <li><a href="elements-buttons.html">Buttons</a></li>
                            <li><a href="elements-accordions.html">Accordions</a></li>
                            <li><a href="elements-tabs.html">Tabs</a></li>
                            <li><a href="elements-testimonials.html">Testimonials</a></li>
                            <li><a href="elements-blog-posts.html">Blog Posts</a></li>
                            <li><a href="elements-portfolio.html">Portfolio</a></li>
                            <li><a href="elements-cta.html">Call to Action</a></li>
                            <li><a href="elements-icon-boxes.html">Icon Boxes</a></li>
                        </ul>
                    </li>
                </ul>
            </nav><!-- End .mobile-nav -->

            <div class="social-icons">
                <a href="#" class="social-icon" target="_blank" title="Facebook"><i class="icon-facebook-f"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
            </div><!-- End .social-icons -->
        </div><!-- End .mobile-menu-wrapper -->
    </div><!-- End .mobile-menu-container -->

    <!-- Sign in / Register Modal -->
    <div class="modal fade" id="signin-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="icon-close"></i></span>
                    </button>

                    <div class="form-box">
                        <div class="form-tab">
                            <ul class="nav nav-pills nav-fill" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="signin-tab" data-toggle="tab" href="#signin" role="tab" aria-controls="signin" aria-selected="true">Sign In</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="register-tab" data-toggle="tab" href="#register" role="tab" aria-controls="register" aria-selected="false">Register</a>
                                </li>
                            </ul>
                            <div class="tab-content" id="tab-content-5">
                                <div class="tab-pane fade show active" id="signin" role="tabpanel" aria-labelledby="signin-tab">
                                    <form action="#">
                                        <div class="form-group">
                                            <label for="singin-email">Username or email address *</label>
                                            <input type="text" class="form-control" id="singin-email" name="singin-email" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-group">
                                            <label for="singin-password">Password *</label>
                                            <input type="password" class="form-control" id="singin-password" name="singin-password" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-footer">
                                            <button type="submit" class="btn btn-outline-primary-2">
                                                <span>LOG IN</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>

                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input" id="signin-remember">
                                                <label class="custom-control-label" for="signin-remember">Remember Me</label>
                                            </div><!-- End .custom-checkbox -->

                                            <a href="#" class="forgot-link">Forgot Your Password?</a>
                                        </div><!-- End .form-footer -->
                                    </form>
                                    <div class="form-choice">
                                        <p class="text-center">or sign in with</p>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-g">
                                                    <i class="icon-google"></i>
                                                    Login With Google
                                                </a>
                                            </div><!-- End .col-6 -->
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-f">
                                                    <i class="icon-facebook-f"></i>
                                                    Login With Facebook
                                                </a>
                                            </div><!-- End .col-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .form-choice -->
                                </div><!-- .End .tab-pane -->
                                <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
                                    <form action="#">
                                        <div class="form-group">
                                            <label for="register-email">Your email address *</label>
                                            <input type="email" class="form-control" id="register-email" name="register-email" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-group">
                                            <label for="register-password">Password *</label>
                                            <input type="password" class="form-control" id="register-password" name="register-password" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-footer">
                                            <button type="submit" class="btn btn-outline-primary-2">
                                                <span>SIGN UP</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>

                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input" id="register-policy" required>
                                                <label class="custom-control-label" for="register-policy">I agree to the <a href="#">privacy policy</a> *</label>
                                            </div><!-- End .custom-checkbox -->
                                        </div><!-- End .form-footer -->
                                    </form>
                                    <div class="form-choice">
                                        <p class="text-center">or sign in with</p>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-g">
                                                    <i class="icon-google"></i>
                                                    Login With Google
                                                </a>
                                            </div><!-- End .col-6 -->
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login  btn-f">
                                                    <i class="icon-facebook-f"></i>
                                                    Login With Facebook
                                                </a>
                                            </div><!-- End .col-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .form-choice -->
                                </div><!-- .End .tab-pane -->
                            </div><!-- End .tab-content -->
                        </div><!-- End .form-tab -->
                    </div><!-- End .form-box -->
                </div><!-- End .modal-body -->
            </div><!-- End .modal-content -->
        </div><!-- End .modal-dialog -->
    </div><!-- End .modal -->

    <!-- Plugins JS File -->
    
   
        

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.hoverIntent.min.js"></script>
    <script src="assets/js/jquery.waypoints.min.js"></script>
    <script src="assets/js/superfish.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="/signupvalidation.js"></script>
    <!-- Main JS File -->
    <script src="assets/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('signOutLink').addEventListener('click', function(event) {
                event.preventDefault(); // Prevent the default action of the link
        
                Swal.fire({
                    title: 'Are you sure?',
                    text: 'You will be signed out!',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Yes, sign me out!'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Redirect or perform logout here
                        window.location.href = '/logout'; // Redirect to logout route
                    }
                });
            });
        });









function validateField(fieldName) {
            const fieldValue = document.getElementById(`register-${fieldName}`).value.trim();
            const errorSpan = document.getElementById(`${fieldName}ErrorMsg`);
            if (fieldValue === '' || fieldValue.includes(' ')) {
                errorSpan.textContent = 'Field cannot be empty or contain spaces';
            } else {
                errorSpan.textContent = ''; // Clear the error message if field is valid
            }
        }

        function validateFullName() {
    const fullname = document.getElementById('register-fullname').value.trim();
    const errorSpan = document.getElementById('fullnameErrorMsg');
    const namePattern = /^[A-Za-z\s]+$/; // Allow alphabetic characters and spaces

    if (fullname === '' || !namePattern.test(fullname)) {
        errorSpan.textContent = 'Full Name should only contain letters and spaces';
        return false;
    } else {
        errorSpan.textContent = '';
        return true;
    }
}



function validatePhone() {
    const phone = document.getElementById('register-phone').value.trim();
    const errorSpan = document.getElementById('phoneErrorMsg');
    const phonePattern = /^\d+$/; // Regular expression to match only digits

    if (phone === '' || phone.includes(' ') || !phonePattern.test(phone)) {
        errorSpan.textContent = 'Phone Number should contain only numeric characters';
        return false;
    } else {
        errorSpan.textContent = '';
        return true;
    }
}


        // Create validation functions for other fields similarly

        document.getElementById('registrationForm').addEventListener('submit', function (event) {
            const isFullNameValid = validateFullName();
            const isPhoneValid = validatePhone();
            // Check for other field validations here

            if (!isFullNameValid || !isPhoneValid /* Add conditions for other fields */) {
                event.preventDefault(); // Prevent form submission if any field is invalid
            }
        });




        function validatePincode() {
    const pincode = document.getElementById('register-pincode').value.trim();
    const errorSpan = document.getElementById('pincodeErrorMsg');
    // Validation logic for pincode, e.g., length, format, etc.
    if (pincode === '' || pincode.includes(' ')) {
        errorSpan.textContent = 'Pincode cannot be empty or contain spaces';
        return false;
    } else {
        errorSpan.textContent = '';
        return true;
    }
}

function validateState() {
    const state = document.getElementById('register-state').value.trim();
    const errorSpan = document.getElementById('stateErrorMsg');
    // Validation logic for state, e.g., length, format, etc.
    if (state === '' || state.includes(' ')) {
        errorSpan.textContent = 'State cannot be empty or contain spaces';
        return false;
    } else {
        errorSpan.textContent = '';
        return true;
    }
}

function validateAddress() {
    const address = document.getElementById('register-address').value.trim();
    const errorSpan = document.getElementById('addressErrorMsg');
    // Validation logic for address, e.g., length, format, etc.
    if (address === '' || address.includes(' ')) {
        errorSpan.textContent = 'Address cannot be empty or contain spaces';
        return false;
    } else {
        errorSpan.textContent = '';
        return true;
    }
}

function validateLocality() {
    const locality = document.getElementById('register-locality').value.trim();
    const errorSpan = document.getElementById('localityErrorMsg');
    // Validation logic for locality, e.g., length, format, etc.
    if (locality === '' || locality.includes(' ')) {
        errorSpan.textContent = 'Locality cannot be empty or contain spaces';
        return false;
    } else {
        errorSpan.textContent = '';
        return true;
    }
}

function validateCity() {
    const city = document.getElementById('register-city').value.trim();
    const errorSpan = document.getElementById('cityErrorMsg');
    // Validation logic for city, e.g., length, format, etc.
    if (city === '' || city.includes(' ')) {
        errorSpan.textContent = 'City cannot be empty or contain spaces';
        return false;
    } else {
        errorSpan.textContent = '';
        return true;
    }
}

// Update the form submission validation to include all field validations
document.getElementById('registrationForm').addEventListener('submit', function (event) {
    const isFullNameValid = validateFullName();
    const isPhoneValid = validatePhone();
    const isPincodeValid = validatePincode();
    const isStateValid = validateState();
    const isAddressValid = validateAddress();
    const isLocalityValid = validateLocality();
    const isCityValid = validateCity();

    if (
        !isFullNameValid || 
        !isPhoneValid || 
        !isPincodeValid || 
        !isStateValid || 
        !isAddressValid || 
        !isLocalityValid || 
        !isCityValid
    ) {
        event.preventDefault(); // Prevent form submission if any field is invalid
    }
});




document.addEventListener('DOMContentLoaded', function () {
    const deleteLinks = document.querySelectorAll('.delete-address');

    deleteLinks.forEach(link => {
        link.addEventListener('click', function (event) {
            event.preventDefault();

            const addressId = link.getAttribute('href').split('/').pop(); // Extracting addressId from href
            deleteAddress(addressId);
        });
    });
  

    async function deleteAddress(addressId) {
      
        try {
            const response = await fetch(`/deleteaddress/${addressId}`, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            if (response.ok) {
                window.location.reload(); // Corrected spelling
                // Successful deletion
                Swal({
                    title: 'Deleted!',
                    text: 'Your address has been deleted.',
                    icon: 'success',
                    button: 'OK',
                });
            } else {
                // Handle unsuccessful deletion
                Swal({
                    title: 'Error!',
                    text: 'Failed to delete address.',
                    icon: 'error',
                    button: 'OK',
                });
            }
        } catch (error) {
            console.error('Error:', error);
            // Show error in SweetAlert
            swal({
                title: 'Error!',
                text: 'An error occurred while deleting the address.',
                icon: 'error',
                button: 'OK',
            });
        }
    }
});

        </script>
          <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

        <!-- SweetAlert CDN -->
        <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.21/datatables.min.js"></script>

        <script>
            $(document).ready(function() {
                $('#table_id').DataTable();
            });



 

        </script>

<script>
    function returnOrder(finderId, productId) {
        // Use SweetAlert to display a confirmation dialog
        Swal.fire({
            title: 'Are you sure you want to return this order?',
            text: 'This action cannot be undone.',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, return it!'
        }).then((result) => {
            if (result.isConfirmed) {
                // Fetch request to the backend
                fetch('/returnorder', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        finderId: finderId,
                        productId: productId,  // Include the productId in the request body
                        // Add other data you want to send to the backend
                    }),
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    // Handle the response from the server if needed
                    console.log('Return request successful', data);
                    // Display success message using SweetAlert
                    Swal.fire('Returned!', 'The order has been returned.', 'success')
                        .then(() => {
                            // Reload the page after the alert is closed
                            location.reload();
                        });
                })
                .catch(error => {
                    // Handle errors
                    console.error('Error sending return request:', error);
                    // Display error message using SweetAlert
                    Swal.fire('Error', 'There was an error returning the order.', 'error');
                });
            }
        });
    }
</script>




    <!-- Add this in the head section of your HTML file -->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/sweetalert2@10">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    
</body>


<!-- molla/dashboard.html  22 Nov 2019 10:03:13 GMT -->
</html>